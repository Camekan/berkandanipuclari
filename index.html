<!DOCTYPE html>
<html lang="tr" class="scroll-smooth">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9ZXGHW6B7G"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-9ZXGHW6B7G');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Berkan'dan İpuçları | English & AI</title>
    
    <meta name="description" content="İngilizce öğrenmeyi yapay zeka ile süperleştirin.">
    <meta name="author" content="Berkan">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Outfit:wght@500;700;800;900&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], heading: ['Outfit', 'sans-serif'] },
                    colors: {
                        primary: { 50: '#f0f9ff', 100: '#e0f2fe', 600: '#0284c7', 900: '#0c4a6e' },
                        dark: { bg: '#020617', surface: '#0f172a' }
                    }
                }
            }
        }
    </script>
    
    <style>
        html { -webkit-tap-highlight-color: transparent; }
        
        /* Language Toggle Logic */
        :root:not([lang="en"]) .lang-en { display: none !important; }
        :root[lang="en"] .lang-tr { display: none !important; }

        .premium-box {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid #cbd5e1;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            transition: all 0.3s;
        }
        .dark .premium-box { background: rgba(15, 23, 42, 0.8); border: 1px solid rgba(255, 255, 255, 0.1); }
        .premium-box:hover { transform: translateY(-5px); box-shadow: 0 10px 20px -5px rgba(0,0,0,0.1); }
        
        /* Active Link Style for Scrollspy */
        .nav-link.active { color: #0284c7; /* primary-600 */ }
        .dark .nav-link.active { color: #38bdf8; /* primary-400 */ }

        .mobile-menu { display: none; position: fixed; top: 80px; left: 0; right: 0; background: rgba(255,255,255,0.98); z-index: 40; border-bottom: 1px solid #ddd; }
        .dark .mobile-menu { background: rgba(15,23,42,0.98); border-bottom: 1px solid #333; }
        .mobile-menu.active { display: block; }
        .mobile-menu a { display: block; padding: 15px 20px; font-weight: bold; border-bottom: 1px solid rgba(0,0,0,0.05); }

        #search-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); backdrop-filter: blur(5px); z-index: 60; align-items: start; justify-content: center; padding-top: 5rem; }
        #search-modal.active { display: flex; }

        .chatbot-widget { position: fixed; bottom: 24px; right: 24px; z-index: 100; }
        .music-widget { position: fixed; bottom: 24px; left: 24px; z-index: 100; }
        .chatbot-window { display: none; position: fixed; bottom: 100px; right: 24px; width: 350px; height: 500px; z-index: 99; flex-direction: column; }
        .chatbot-window.active { display: flex; }
        
        .audio-playing { animation: pulse-ring 2s infinite; }
        @keyframes pulse-ring { 0% { box-shadow: 0 0 0 0 rgba(56, 189, 248, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(56, 189, 248, 0); } 100% { box-shadow: 0 0 0 0 rgba(56, 189, 248, 0); } }
    </style>
</head>
<body class="bg-blue-50/50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 transition-colors duration-300 antialiased font-sans">

    <div class="fixed inset-0 overflow-hidden pointer-events-none z-0">
        <div class="absolute top-0 left-1/4 w-96 h-96 bg-blue-300/40 dark:bg-blue-900/20 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-3xl opacity-40 animate-blob"></div>
        <div class="absolute top-0 right-1/4 w-96 h-96 bg-purple-300/40 dark:bg-purple-900/20 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-3xl opacity-40 animate-blob delay-2000"></div>
    </div>

    <div class="music-widget">
        <button onclick="toggleBgMusic()" class="bg-indigo-600 text-white p-4 rounded-full shadow-xl hover:scale-110 transition-transform btn-3d flex items-center justify-center">
            <i id="music-icon" data-lucide="music" class="w-6 h-6"></i>
        </button>
        <audio id="bg-music" loop src="chill.mp3"></audio>
    </div>

    <nav class="fixed w-full z-50 premium-box border-b-0 rounded-none top-0">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <a href="#" class="flex items-center gap-2">
                <div class="bg-blue-600 text-white p-2 rounded-lg"><i data-lucide="sparkles" class="w-5 h-5"></i></div>
                <span class="font-heading font-black text-xl lang-tr">Berkan'dan İpuçları</span>
                <span class="font-heading font-black text-xl lang-en">Berkan's Tips</span>
            </a>

            <div class="hidden md:flex items-center gap-1 bg-white/50 dark:bg-white/5 p-1 rounded-full border border-slate-200 dark:border-white/10" id="desktop-menu">
                <a href="#materials" class="nav-link px-4 py-2 text-sm font-bold hover:text-blue-600 transition-colors">
                    <span class="lang-tr">Materyaller</span><span class="lang-en">Materials</span>
                </a>
                <a href="#downloads" class="nav-link px-4 py-2 text-sm font-bold hover:text-blue-600 transition-colors">
                    <span class="lang-tr">İndirilenler</span><span class="lang-en">Downloads</span>
                </a>
                <a href="#blog" class="nav-link px-4 py-2 text-sm font-bold hover:text-blue-600 transition-colors">Blog</a>
                <a href="#roadmap" class="nav-link px-4 py-2 text-sm font-bold hover:text-blue-600 transition-colors">
                    <span class="lang-tr">Yol Haritası</span><span class="lang-en">Roadmap</span>
                </a>
                <a href="#prompts" class="nav-link px-4 py-2 text-sm font-bold hover:text-blue-600 transition-colors">
                    <span class="lang-tr">Promptlar</span><span class="lang-en">Prompts</span>
                </a>
            </div>

            <div class="flex items-center gap-2">
                <button onclick="toggleSearch()" class="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800"><i data-lucide="search" class="w-5 h-5"></i></button>
                <button id="theme-toggle" class="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800">
                    <i data-lucide="sun" class="w-5 h-5 hidden dark:block"></i>
                    <i data-lucide="moon" class="w-5 h-5 block dark:hidden"></i>
                </button>
                <button id="lang-toggle" class="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 font-bold text-xs">
                    <span class="lang-tr">EN</span>
                    <span class="lang-en">TR</span>
                </button>
                <button onclick="document.getElementById('mobile-menu').classList.toggle('active')" class="md:hidden p-2"><i data-lucide="menu"></i></button>
            </div>
        </div>
        
        <div id="mobile-menu" class="mobile-menu">
            <a href="#materials" class="text-slate-700 dark:text-slate-300 font-bold">
                <span class="lang-tr">Materyaller</span><span class="lang-en">Materials</span>
            </a>
            <a href="#downloads" class="text-slate-700 dark:text-slate-300 font-bold">
                <span class="lang-tr">İndirilenler</span><span class="lang-en">Downloads</span>
            </a>
            <a href="#blog" class="text-slate-700 dark:text-slate-300 font-bold">Blog</a>
            <a href="#roadmap" class="text-slate-700 dark:text-slate-300 font-bold">
                <span class="lang-tr">Yol Haritası</span><span class="lang-en">Roadmap</span>
            </a>
            <a href="#prompts" class="text-slate-700 dark:text-slate-300 font-bold">
                <span class="lang-tr">Promptlar</span><span class="lang-en">Prompts</span>
            </a>
        </div>
    </nav>

    <div id="search-modal">
        <div class="premium-box w-full max-w-2xl p-6 rounded-3xl mx-4">
            <div class="flex items-center gap-4 mb-4">
                <i data-lucide="search" class="text-slate-400"></i>
                <input type="text" id="search-input" placeholder="Ara... / Search..." class="flex-grow bg-transparent text-xl font-bold outline-none" oninput="performSearch(this.value)">
                <button onclick="toggleSearch()"><i data-lucide="x"></i></button>
            </div>
            <div id="search-results" class="space-y-2"></div>
        </div>
    </div>

    <main class="pt-32">
        <section class="px-6 text-center max-w-4xl mx-auto mb-20">
            <span class="inline-block px-4 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs font-black uppercase tracking-wider mb-6">
                <span class="lang-tr">Yeni Nesil Öğrenme</span><span class="lang-en">Next Gen Learning</span>
            </span>
            <h1 class="font-heading text-5xl md:text-7xl font-black mb-6 leading-tight">
                <span class="lang-tr">İngilizceyi <span class="text-blue-600">Süperleştir.</span></span>
                <span class="lang-en">Supercharge <span class="text-blue-600">English.</span></span>
            </h1>
            <p class="text-xl text-slate-600 dark:text-slate-400 mb-10">
                <span class="lang-tr">Yapay zeka ve özel materyallerle hedefine ışık hızında ulaş.</span>
                <span class="lang-en">Reach your goal at light speed with AI and special materials.</span>
            </p>
            <div class="flex justify-center gap-4">
                <a href="#materials" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-xl font-bold shadow-lg shadow-blue-500/30 transition-transform hover:scale-105">
                    <span class="lang-tr">Materyalleri İncele</span><span class="lang-en">View Materials</span>
                </a>
            </div>
        </section>

        <section id="social-feeds" class="py-24 px-6">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-16">
                    <div class="flex items-center justify-center gap-4 mb-4">
                        <h2 class="font-heading text-4xl md:text-5xl font-black text-slate-900 dark:text-white">
                            <span class="lang-tr">Sosyal Medya</span><span class="lang-en">Social Media</span>
                        </h2>
                        <button onclick="toggleAudio('1')" class="bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 p-2.5 rounded-full hover:bg-primary-200 transition-all flex-shrink-0" id="btn-1">
                            <i id="icon-1" data-lucide="play-circle" class="w-7 h-7"></i>
                        </button>
                        <audio id="audio-1" src="1.mp3"></audio>
                    </div>
                </div>
                <p class="text-center text-slate-500">YouTube & Instagram Placeholders Here</p>
            </div>
        </section>

        <section id="roadmap" class="py-24 px-6">
            <div class="max-w-5xl mx-auto">
                <div class="text-center mb-16">
                    <div class="flex items-center justify-center gap-4 mb-4">
                        <h2 class="font-heading text-4xl md:text-5xl font-black text-slate-900 dark:text-white">
                            <span class="lang-tr">Öğrenme Yol Haritası</span><span class="lang-en">Learning Roadmap</span>
                        </h2>
                        <button onclick="toggleAudio('2')" class="bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 p-2.5 rounded-full hover:bg-purple-200 transition-all flex-shrink-0" id="btn-2">
                            <i id="icon-2" data-lucide="play-circle" class="w-7 h-7"></i>
                        </button>
                        <audio id="audio-2" src="2.mp3"></audio>
                    </div>
                </div>
                <div class="text-center text-slate-500">Roadmap Content...</div>
            </div>
        </section>

        <section id="materials" class="py-24 px-6 bg-white/60 dark:bg-white/5 backdrop-blur-md border-y border-slate-200 dark:border-slate-800">
            <div class="max-w-7xl mx-auto grid md:grid-cols-2 gap-16 items-center">
                <div>
                    <div class="flex items-center gap-4 mb-6">
                        <h2 class="font-heading text-4xl md:text-5xl font-black text-slate-900 dark:text-white">
                            <span class="lang-tr">Materyaller</span><span class="lang-en">Materials</span>
                        </h2>
                        <button onclick="toggleAudio('3')" class="bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 p-2.5 rounded-full hover:bg-blue-200 transition-all flex-shrink-0" id="btn-3">
                            <i id="icon-3" data-lucide="play-circle" class="w-7 h-7"></i>
                        </button>
                        <audio id="audio-3" src="3.mp3"></audio>
                    </div>
                    <p class="text-lg font-medium text-slate-600 dark:text-slate-400 mb-10">
                        <span class="lang-tr">Staj dönemimde ve üniversitede hazırladığım tüm kaynaklar.</span>
                        <span class="lang-en">All resources prepared during my internship.</span>
                    </p>
                    <a href="https://drive.google.com/drive/folders/1nM7OoeFkGq82YtZetx1cV5LkFVVHueXT" target="_blank" class="inline-flex items-center gap-3 text-primary-700 dark:text-primary-400 font-black text-lg">
                        <span class="lang-tr">Google Drive'a Git</span><span class="lang-en">Go to Google Drive</span> <i data-lucide="arrow-right"></i>
                    </a>
                </div>
            </div>
        </section>

        <section id="prompts" class="py-24 px-6 bg-slate-50 dark:bg-slate-900/50 border-t border-slate-200 dark:border-slate-800">
            <div class="max-w-7xl mx-auto">
                <div class="flex items-center gap-4 mb-12">
                    <h2 class="font-heading text-4xl font-black text-slate-900 dark:text-white">
                        <span class="lang-tr">Prompt Kütüphanesi</span><span class="lang-en">Prompt Library</span>
                    </h2>
                    <button onclick="toggleAudio('5')" class="bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-2.5 rounded-full hover:bg-orange-200 transition-all flex-shrink-0" id="btn-5">
                        <i id="icon-5" data-lucide="play-circle" class="w-7 h-7"></i>
                    </button>
                    <audio id="audio-5" src="5.mp3"></audio>
                </div>
                <div class="premium-box p-8 rounded-3xl bg-white dark:bg-dark-surface">
                    <h3 class="font-heading font-extrabold text-xl text-slate-900 dark:text-white mb-3">
                        <span class="lang-tr">Ders Planı Oluşturucu</span><span class="lang-en">Lesson Plan Creator</span>
                    </h3>
                    <div class="bg-slate-100 dark:bg-black/40 p-5 rounded-2xl text-sm font-bold font-mono text-slate-600 dark:text-slate-300 mb-8">
                        <p id="p1">"Create a 40-minute English lesson plan for A2 level students..."</p>
                    </div>
                    <button onclick="copyToClipboard('p1')" class="w-full py-4 rounded-xl bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-bold text-sm shadow-lg">
                        <span class="lang-tr">Kopyala</span><span class="lang-en">Copy</span>
                    </button>
                </div>
            </div>
        </section>
        
        <section id="downloads" class="py-24 px-6">
            <div class="max-w-7xl mx-auto">
                <div class="flex items-center justify-center gap-4 mb-4">
                    <h2 class="font-heading text-4xl font-black">
                        <span class="lang-tr">Materyalleri İndir</span><span class="lang-en">Download Materials</span>
                    </h2>
                    <button onclick="toggleAudio('9')" class="bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 p-2.5 rounded-full hover:bg-blue-200 transition-all flex-shrink-0" id="btn-9">
                        <i id="icon-9" data-lucide="play-circle" class="w-7 h-7"></i>
                    </button>
                    <audio id="audio-9" src="9.mp3"></audio>
                </div>
                <p class="text-center text-slate-500">Download Cards Here...</p>
            </div>
        </section>

        <section id="blog" class="py-24 px-6 bg-white/60 dark:bg-white/5">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-12">
                    <div class="flex items-center justify-center gap-4 mb-4">
                        <h2 class="font-heading text-4xl font-black text-slate-900 dark:text-white">Blog</h2>
                        <button onclick="toggleAudio('10')" class="bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-2.5 rounded-full hover:bg-orange-200 transition-all flex-shrink-0" id="btn-10">
                            <i id="icon-10" data-lucide="play-circle" class="w-7 h-7"></i>
                        </button>
                        <audio id="audio-10" src="10.mp3"></audio>
                    </div>
                    <p class="text-xl text-slate-600 dark:text-slate-400 mb-8">
                        <span class="lang-tr">En son yazılarım</span>
                        <span class="lang-en">Latest Posts</span>
                    </p>
                </div>
                </div>
        </section>

        <section id="comments" class="py-24 px-6">
            <div class="max-w-4xl mx-auto">
                <div class="flex items-center justify-center gap-4 mb-12">
                    <h2 class="font-heading text-4xl font-black text-center">
                        <span class="lang-tr">Yorumlar</span><span class="lang-en">Comments</span>
                    </h2>
                </div>
                
                <div class="premium-box p-8 rounded-3xl mb-8 bg-white dark:bg-slate-800">
                    <div id="disqus_thread"></div>
                    <script>
                        /**
                        * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                        * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
                        /*
                        var disqus_config = function () {
                        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
                        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                        };
                        */
                        (function() { // DON'T EDIT BELOW THIS LINE
                        var d = document, s = d.createElement('script');
                        s.src = 'https://berkandanipuclari.disqus.com/embed.js';
                        s.setAttribute('data-timestamp', +new Date());
                        (d.head || d.body).appendChild(s);
                        })();
                    </script>
                    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                    </div>
            </div>
        </section>
    </main>

    <footer class="py-12 text-center border-t border-slate-200 dark:border-slate-800 bg-white/50 dark:bg-black/20 backdrop-blur-sm">
        <div class="max-w-7xl mx-auto px-6">
            <span class="font-heading font-black text-xl text-slate-900 dark:text-white block mb-2">
                <span class="lang-tr">Berkan'dan İpuçları</span><span class="lang-en">Berkan's Tips</span>
            </span>
            <p class="text-sm font-bold text-slate-400 mb-8">
                <span class="lang-tr">© 2026. Tüm hakları saklıdır.</span><span class="lang-en">© 2026. All rights reserved.</span>
            </p>
        </div>
    </footer>

    <div class="chatbot-widget">
        <button onclick="toggleChatbot()" class="bg-primary-600 hover:bg-primary-700 text-white p-4 rounded-full shadow-2xl btn-3d">
            <i data-lucide="message-circle" class="w-6 h-6"></i>
        </button>
    </div>
    <div id="chatbot-window" class="chatbot-window premium-box rounded-3xl">
        <div class="p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
            <h3 class="font-bold">AI Asistan</h3>
            <button onclick="toggleChatbot()"><i data-lucide="x"></i></button>
        </div>
        <div id="chat-messages" class="chat-messages flex-grow p-4 space-y-3 overflow-y-auto"></div>
        <div class="p-4 border-t border-slate-200 dark:border-slate-700 flex gap-2">
            <input type="text" id="chat-input" placeholder="..." class="flex-grow p-3 rounded-xl bg-slate-100 dark:bg-slate-700 outline-none">
            <button onclick="sendMessage()" class="bg-primary-600 text-white px-4 rounded-xl"><i data-lucide="send"></i></button>
        </div>
    </div>
    <div id="toast" class="fixed bottom-8 left-1/2 -translate-x-1/2 premium-box px-6 py-4 rounded-2xl shadow-2xl transform translate-y-40 opacity-0 transition-all duration-500 z-50 flex items-center gap-3 bg-white dark:bg-slate-800">
        <div class="bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 p-1.5 rounded-full"><i data-lucide="check" class="w-4 h-4"></i></div>
        <span class="font-bold text-slate-900 dark:text-white"><span class="lang-tr">Kopyalandı!</span><span class="lang-en">Copied!</span></span>
    </div>

    <script id="dsq-count-scr" src="//berkandanipuclari.disqus.com/count.js" async></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            
            /* Theme & Lang Init */
            if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            }
            const currentLang = localStorage.getItem('lang') || 'tr';
            document.documentElement.lang = currentLang;
        });

        /* --- 1. SCROLLSPY (Links change color) --- */
        const sections = document.querySelectorAll('section[id]');
        const navLinks = document.querySelectorAll('.nav-link');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (scrollY >= sectionTop - 150) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href').includes(current) && current !== '') {
                    link.classList.add('active');
                }
            });
        });

        /* --- 2. THEME & LANGUAGE --- */
        document.getElementById('theme-toggle').addEventListener('click', () => {
            document.documentElement.classList.toggle('dark');
            localStorage.setItem('theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
        });

        document.getElementById('lang-toggle').addEventListener('click', () => {
            const newLang = document.documentElement.lang === 'tr' ? 'en' : 'tr';
            document.documentElement.lang = newLang;
            localStorage.setItem('lang', newLang);
        });

        /* --- 3. BACKGROUND MUSIC (Looping MP3) --- */
        let isMusicPlaying = false;
        window.toggleBgMusic = function() {
            const audio = document.getElementById('bg-music');
            const icon = document.getElementById('music-icon');
            const btn = document.querySelector('.music-widget button');

            if (isMusicPlaying) {
                audio.pause();
                // To change icon, we change the attribute THEN run createIcons again
                icon.setAttribute('data-lucide', 'music');
                btn.classList.remove('audio-playing');
            } else {
                audio.play().catch(e => console.log("Interaction required"));
                icon.setAttribute('data-lucide', 'pause');
                btn.classList.add('audio-playing');
            }
            isMusicPlaying = !isMusicPlaying;
            lucide.createIcons(); // IMPORTANT: This updates the icon visually
        };

        /* --- 4. SMALL AUDIO ICONS (Fix: Play/Pause swap) --- */
        let currentAudio = null;
        let currentIconId = null;

        window.toggleAudio = function(id) {
            const audio = document.getElementById(`audio-${id}`);
            const icon = document.getElementById(`icon-${id}`);
            
            // If clicking the same playing audio, pause it
            if (currentAudio === audio && !audio.paused) {
                audio.pause();
                icon.setAttribute('data-lucide', 'play-circle');
                currentAudio = null;
            } else {
                // Stop previous
                if (currentAudio) {
                    currentAudio.pause();
                    currentAudio.currentTime = 0;
                    document.getElementById(currentIconId).setAttribute('data-lucide', 'play-circle');
                }
                // Play new
                audio.play();
                icon.setAttribute('data-lucide', 'pause-circle');
                currentAudio = audio;
                currentIconId = `icon-${id}`;
                
                audio.onended = () => {
                    icon.setAttribute('data-lucide', 'play-circle');
                    lucide.createIcons(); // Update icon when song ends
                };
            }
            lucide.createIcons(); // Update icons immediately after click
        };

        /* --- 5. SEARCH & COPY --- */
        window.toggleSearch = () => {
            const m = document.getElementById('search-modal');
            m.classList.toggle('active');
            if(m.classList.contains('active')) document.getElementById('search-input').focus();
        };

        window.performSearch = (q) => {
            const c = document.getElementById('search-results');
            c.innerHTML = '';
            if (q.length < 2) return;
            // Fake data
            const data = [{t:'Materials',l:'#materials'},{t:'Blog',l:'#blog'},{t:'Prompts',l:'#prompts'}];
            data.filter(i => i.t.toLowerCase().includes(q.toLowerCase())).forEach(i => {
                c.innerHTML += `<div class="p-3 hover:bg-slate-100 rounded-xl"><a href="${i.l}" class="font-bold">${i.t}</a></div>`;
            });
        };

        window.copyToClipboard = (id) => {
            const txt = document.getElementById(id).innerText.replace(/^"|"$/g, '');
            navigator.clipboard.writeText(txt).then(() => {
                const t = document.getElementById('toast');
                t.classList.remove('opacity-0', 'translate-y-40');
                setTimeout(() => t.classList.add('opacity-0', 'translate-y-40'), 3000);
            });
        };

        /* --- 6. CHATBOT --- */
        window.toggleChatbot = () => document.getElementById('chatbot-window').classList.toggle('active');
        window.sendMessage = () => {
            const inp = document.getElementById('chat-input');
            const c = document.getElementById('chat-messages');
            if(!inp.value) return;
            
            c.innerHTML += `<div class="bg-primary-600 text-white p-3 rounded-xl ml-auto max-w-[80%]">${inp.value}</div>`;
            inp.value = '';
            c.scrollTop = c.scrollHeight;
            
            setTimeout(() => {
                c.innerHTML += `<div class="bg-slate-100 dark:bg-slate-700 p-3 rounded-xl mr-auto max-w-[80%]">I am a demo.</div>`;
                c.scrollTop = c.scrollHeight;
            }, 1000);
        };
    </script>
</body>
</html>
